2025-07-02 03:11:20,120 - gui_exit_gate - INFO - GUI Setup completed
2025-07-02 03:11:20,126 - gui_exit_gate - INFO - Initializing services...
2025-07-02 03:11:20,261 - config - INFO - Loaded configuration from config.ini
2025-07-02 03:11:20,262 - gate_service - WARNING - Hardware not available - running in SIMULATION mode
2025-07-02 03:11:20,278 - gui_exit_gate - INFO - Gate service imported successfully
2025-07-02 03:11:20,374 - gui_exit_gate - INFO - WARNING: USB scanner import failed: No module named 'termios'
2025-07-02 03:11:24,119 - database_service - INFO - Connected to CouchDB server: Unknown (legacy method)
2025-07-02 03:11:24,123 - database_service - INFO - Connected to existing database: transactions
2025-07-02 03:11:24,131 - database_service - INFO - Database connection established
2025-07-02 03:11:24,136 - gui_exit_gate - INFO - Database service imported successfully
2025-07-02 03:11:24,147 - root - WARNING - pygame not available, audio functionality disabled
2025-07-02 03:11:24,152 - gui_exit_gate - INFO - Audio service imported successfully
2025-07-02 03:11:24,158 - gui_exit_gate - INFO - Audio service is disabled or not available
2025-07-02 03:11:24,267 - camera_service - INFO - Driver camera disabled in configuration
2025-07-02 03:11:24,268 - camera_service - INFO - Initialized 1 cameras
2025-07-02 03:11:24,281 - gui_exit_gate - INFO - Camera service imported successfully
2025-07-02 03:11:24,287 - gui_exit_gate - INFO - Testing camera connectivity...
2025-07-02 03:11:24,289 - camera_service - INFO - Testing camera: exit
2025-07-02 03:11:24,289 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-02 03:11:24,653 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-02 03:11:24,653 - camera_service - INFO - Camera 'exit' test successful
2025-07-02 03:11:24,663 - gui_exit_gate - INFO - Camera 'exit': OK
2025-07-02 03:11:24,705 - gui_exit_gate - INFO - Scanner not available - manual input only
2025-07-02 03:11:24,760 - gui_exit_gate - INFO - Adding gate status listener...
2025-07-02 03:11:24,784 - gui_exit_gate - INFO - Gate status listener added
2025-07-02 03:11:24,800 - gui_exit_gate - INFO - Services initialization completed
2025-07-02 03:11:24,810 - gui_exit_gate - INFO - System ready - waiting for barcode input...
2025-07-02 03:11:24,838 - gui_exit_gate - INFO - Exit Gate GUI initialized
2025-07-02 03:11:24,853 - gui_exit_gate - INFO - Exit Gate GUI started
2025-07-02 03:11:25,221 - gui_exit_gate - INFO - Auto-listener started
2025-07-02 03:11:50,052 - gui_exit_gate - INFO - Auto-processing barcode: TRANSACTION_1751400350454477
2025-07-02 03:11:50,054 - gui_exit_gate - INFO - === BARCODE INPUT RECEIVED ===
2025-07-02 03:11:50,055 - gui_exit_gate - INFO - Raw barcode: 'TRANSACTION_1751400350454477'
2025-07-02 03:11:50,056 - gui_exit_gate - INFO - Barcode length: 28
2025-07-02 03:11:50,058 - gui_exit_gate - INFO - Barcode valid - calling process_vehicle_exit
2025-07-02 03:11:50,063 - gui_exit_gate - INFO - === PROCESSING VEHICLE EXIT ===
2025-07-02 03:11:50,068 - gui_exit_gate - INFO - Barcode: TRANSACTION_1751400350454477
2025-07-02 03:11:50,079 - gui_exit_gate - INFO - Debug mode: ENABLED
2025-07-02 03:11:50,081 - gui_exit_gate - INFO - Capturing exit images...
2025-07-02 03:11:50,082 - database_service - INFO - Processing vehicle exit for: TRANSACTION_1751400350454477
2025-07-02 03:11:50,099 - database_service - INFO - Searching for transaction with barcode: TRANSACTION_1751400350454477
2025-07-02 03:11:50,195 - database_service - INFO - Found transaction by full ID (lowercase): transaction_1751400350454477
2025-07-02 03:11:50,196 - database_service - INFO - Found transaction by barcode
2025-07-02 03:11:50,196 - database_service - ERROR - Error calculating parking fee: can't subtract offset-naive and offset-aware datetimes
2025-07-02 03:11:50,196 - database_service - INFO - Calculated fee: 0 for 0 hours
2025-07-02 03:11:50,914 - database_service - INFO - Transaction transaction_1751400350454477 marked as exited
2025-07-02 03:11:50,915 - database_service - INFO - Vehicle exit processed successfully for: TRANSACTION_1751400350454477
2025-07-02 03:11:52,651 - gui_exit_gate - INFO - \u2705 Valid transaction found in database
2025-07-02 03:11:52,658 - gui_exit_gate - INFO - Opening gate - Valid transaction
2025-07-02 03:11:52,667 - gui_exit_gate - INFO - Gate service available - triggering open
2025-07-02 03:11:52,680 - gui_exit_gate - INFO - Gate status: OPENING
2025-07-02 03:11:52,692 - gate_service - INFO - SIMULATION: Gate opened
2025-07-02 03:11:52,693 - gui_exit_gate - INFO - Gate status: OPEN
2025-07-02 03:11:52,699 - gate_service - INFO - Gate opened successfully
2025-07-02 03:11:52,702 - gui_exit_gate - INFO - \u2705 GATE OPENED SUCCESSFULLY by barcode scan!
2025-07-02 03:11:52,715 - gui_exit_gate - INFO - Auto-capturing exit images for barcode: TRANSACTION_1751400350454477
2025-07-02 03:11:52,717 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-02 03:11:52,913 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-02 03:11:52,921 - gui_exit_gate - INFO - \u2705 Auto-capture successful for barcode: TRANSACTION_1751400350454477
2025-07-02 03:11:52,929 - gui_exit_gate - INFO - Stored combined exit image data
2025-07-02 03:11:52,943 - database_service - INFO - Searching for transaction with barcode: TRANSACTION_1751400350454477
2025-07-02 03:11:53,024 - database_service - INFO - Found transaction by full ID (lowercase): transaction_1751400350454477
2025-07-02 03:11:53,025 - gui_exit_gate - INFO - Saving exit images to transaction: transaction_1751400350454477
2025-07-02 03:11:53,460 - database_service - INFO - Added image exit.jpg to transaction transaction_1751400350454477
2025-07-02 03:11:53,462 - gui_exit_gate - INFO - \u2705 Saved exit image as attachment (combined)
2025-07-02 03:11:53,476 - gui_exit_gate - INFO - Successfully saved 1 exit image(s) as attachment(s)
2025-07-02 03:11:53,810 - gui_exit_gate - INFO - Camera preview updated (640x358)
2025-07-02 03:11:53,915 - gui_exit_gate - INFO - Gate status: CLOSING
2025-07-02 03:11:53,943 - gate_service - INFO - SIMULATION: Gate closed
2025-07-02 03:11:53,944 - gui_exit_gate - INFO - Gate status: CLOSED
2025-07-02 03:11:53,960 - gate_service - INFO - Gate closed successfully
2025-07-02 03:11:53,960 - gui_exit_gate - INFO - Auto-close gate: Success
2025-07-02 03:12:47,554 - gui_exit_gate - INFO - Shutting down...
2025-07-02 03:12:47,568 - gate_service - INFO - Gate service cleanup completed
2025-07-02 03:12:47,573 - audio_service - INFO - Audio service cleanup completed
2025-07-02 03:12:47,574 - gui_exit_gate - INFO - Camera service shutdown
2025-07-02 03:13:54,223 - gui_exit_gate - INFO - GUI Setup completed
2025-07-02 03:13:54,253 - gui_exit_gate - INFO - Initializing services...
2025-07-02 03:13:54,439 - config - INFO - Loaded configuration from config.ini
2025-07-02 03:13:54,440 - gate_service - WARNING - Hardware not available - running in SIMULATION mode
2025-07-02 03:13:54,443 - gui_exit_gate - INFO - Gate service imported successfully
2025-07-02 03:13:54,458 - gui_exit_gate - INFO - WARNING: USB scanner import failed: No module named 'termios'
2025-07-02 03:13:57,442 - database_service - INFO - Connected to CouchDB server: Unknown (legacy method)
2025-07-02 03:13:57,445 - database_service - INFO - Connected to existing database: transactions
2025-07-02 03:13:57,449 - database_service - INFO - Database connection established
2025-07-02 03:13:57,452 - gui_exit_gate - INFO - Database service imported successfully
2025-07-02 03:13:57,455 - root - WARNING - pygame not available, audio functionality disabled
2025-07-02 03:13:57,459 - gui_exit_gate - INFO - Audio service imported successfully
2025-07-02 03:13:57,465 - gui_exit_gate - INFO - Audio service is disabled or not available
2025-07-02 03:13:57,539 - camera_service - INFO - Driver camera disabled in configuration
2025-07-02 03:13:57,539 - camera_service - INFO - Initialized 1 cameras
2025-07-02 03:13:57,548 - gui_exit_gate - INFO - Camera service imported successfully
2025-07-02 03:13:57,551 - gui_exit_gate - INFO - Testing camera connectivity...
2025-07-02 03:13:57,551 - camera_service - INFO - Testing camera: exit
2025-07-02 03:13:57,551 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-02 03:13:57,620 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-02 03:13:57,621 - camera_service - INFO - Camera 'exit' test successful
2025-07-02 03:13:57,623 - gui_exit_gate - INFO - Camera 'exit': OK
2025-07-02 03:13:57,628 - gui_exit_gate - INFO - Scanner not available - manual input only
2025-07-02 03:13:57,632 - gui_exit_gate - INFO - Adding gate status listener...
2025-07-02 03:13:57,635 - gui_exit_gate - INFO - Gate status listener added
2025-07-02 03:13:57,643 - gui_exit_gate - INFO - Services initialization completed
2025-07-02 03:13:57,648 - gui_exit_gate - INFO - System ready - waiting for barcode input...
2025-07-02 03:13:57,652 - gui_exit_gate - INFO - Exit Gate GUI initialized
2025-07-02 03:13:57,654 - gui_exit_gate - INFO - Exit Gate GUI started
2025-07-02 03:13:57,879 - gui_exit_gate - INFO - Auto-listener started
2025-07-02 03:14:04,257 - gui_exit_gate - INFO - Auto-processing barcode: 1751400350454477
2025-07-02 03:14:04,258 - gui_exit_gate - INFO - === BARCODE INPUT RECEIVED ===
2025-07-02 03:14:04,258 - gui_exit_gate - INFO - Raw barcode: '1751400350454477'
2025-07-02 03:14:04,259 - gui_exit_gate - INFO - Barcode length: 16
2025-07-02 03:14:04,261 - gui_exit_gate - INFO - Barcode valid - calling process_vehicle_exit
2025-07-02 03:14:04,262 - gui_exit_gate - INFO - === PROCESSING VEHICLE EXIT ===
2025-07-02 03:14:04,264 - gui_exit_gate - INFO - Barcode: 1751400350454477
2025-07-02 03:14:04,266 - gui_exit_gate - INFO - Debug mode: ENABLED
2025-07-02 03:14:04,267 - gui_exit_gate - INFO - Capturing exit images...
2025-07-02 03:14:04,268 - database_service - INFO - Processing vehicle exit for: 1751400350454477
2025-07-02 03:14:04,272 - database_service - INFO - Searching for transaction with barcode: 1751400350454477
2025-07-02 03:14:04,283 - database_service - INFO - Found transaction by primary ID: transaction_1751400350454477
2025-07-02 03:14:04,284 - database_service - INFO - Found transaction by barcode
2025-07-02 03:14:04,284 - database_service - WARNING - Vehicle already exited at: 2025-07-02T03:11:50.196568
2025-07-02 03:14:04,974 - gui_exit_gate - INFO - \u274c No transaction found in database: Vehicle already exited at: 2025-07-02T03:11:50.196568
2025-07-02 03:14:04,976 - gui_exit_gate - INFO - DEBUG MODE: Opening gate despite no transaction found
2025-07-02 03:14:04,977 - gui_exit_gate - INFO - Gate service available - triggering open
2025-07-02 03:14:04,980 - gui_exit_gate - INFO - Gate status: OPENING
2025-07-02 03:14:04,981 - gate_service - INFO - SIMULATION: Gate opened
2025-07-02 03:14:04,984 - gui_exit_gate - INFO - Gate status: OPEN
2025-07-02 03:14:04,984 - gate_service - INFO - Gate opened successfully
2025-07-02 03:14:05,017 - gui_exit_gate - INFO - \u2705 GATE OPENED SUCCESSFULLY by barcode scan!
2025-07-02 03:14:05,021 - gui_exit_gate - INFO - Auto-capturing exit images for barcode: 1751400350454477
2025-07-02 03:14:05,021 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-02 03:14:05,205 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-02 03:14:05,207 - gui_exit_gate - INFO - \u2705 Auto-capture successful for barcode: 1751400350454477
2025-07-02 03:14:05,208 - gui_exit_gate - INFO - Stored combined exit image data
2025-07-02 03:14:05,208 - database_service - INFO - Searching for transaction with barcode: 1751400350454477
2025-07-02 03:14:05,221 - database_service - INFO - Found transaction by primary ID: transaction_1751400350454477
2025-07-02 03:14:05,222 - gui_exit_gate - INFO - Saving exit images to transaction: transaction_1751400350454477
2025-07-02 03:14:05,268 - database_service - INFO - Added image exit.jpg to transaction transaction_1751400350454477
2025-07-02 03:14:05,270 - gui_exit_gate - INFO - \u2705 Saved exit image as attachment (combined)
2025-07-02 03:14:05,272 - gui_exit_gate - INFO - Successfully saved 1 exit image(s) as attachment(s)
2025-07-02 03:14:05,423 - gui_exit_gate - INFO - Camera preview updated (640x358)
2025-07-02 03:14:06,031 - gui_exit_gate - INFO - Gate status: CLOSING
2025-07-02 03:14:06,033 - gate_service - INFO - SIMULATION: Gate closed
2025-07-02 03:14:06,033 - gui_exit_gate - INFO - Gate status: CLOSED
2025-07-02 03:14:06,034 - gate_service - INFO - Gate closed successfully
2025-07-02 03:14:06,034 - gui_exit_gate - INFO - Auto-close gate: Success
2025-07-02 03:15:18,639 - gui_exit_gate - INFO - Auto-processing barcode: 1751400910513108
2025-07-02 03:15:18,641 - gui_exit_gate - INFO - === BARCODE INPUT RECEIVED ===
2025-07-02 03:15:18,642 - gui_exit_gate - INFO - Raw barcode: '1751400910513108'
2025-07-02 03:15:18,642 - gui_exit_gate - INFO - Barcode length: 16
2025-07-02 03:15:18,643 - gui_exit_gate - INFO - Barcode valid - calling process_vehicle_exit
2025-07-02 03:15:18,643 - gui_exit_gate - INFO - === PROCESSING VEHICLE EXIT ===
2025-07-02 03:15:18,644 - gui_exit_gate - INFO - Barcode: 1751400910513108
2025-07-02 03:15:18,644 - gui_exit_gate - INFO - Debug mode: ENABLED
2025-07-02 03:15:18,646 - gui_exit_gate - INFO - Capturing exit images...
2025-07-02 03:15:18,646 - database_service - INFO - Processing vehicle exit for: 1751400910513108
2025-07-02 03:15:18,654 - database_service - INFO - Searching for transaction with barcode: 1751400910513108
2025-07-02 03:15:18,746 - database_service - INFO - Performing full database scan (doc_count: 59)
2025-07-02 03:15:18,966 - database_service - INFO - No transaction found for barcode: 1751400910513108
2025-07-02 03:15:18,985 - database_service - WARNING - No transaction found for: 1751400910513108
2025-07-02 03:15:18,985 - gui_exit_gate - INFO - \u274c No transaction found in database: No active transaction found for: 1751400910513108
2025-07-02 03:15:18,986 - gui_exit_gate - INFO - DEBUG MODE: Opening gate despite no transaction found
2025-07-02 03:15:18,986 - gui_exit_gate - INFO - Gate service available - triggering open
2025-07-02 03:15:18,986 - gui_exit_gate - INFO - Gate status: OPENING
2025-07-02 03:15:18,987 - gate_service - INFO - SIMULATION: Gate opened
2025-07-02 03:15:18,987 - gui_exit_gate - INFO - Gate status: OPEN
2025-07-02 03:15:18,987 - gate_service - INFO - Gate opened successfully
2025-07-02 03:15:18,988 - gui_exit_gate - INFO - \u2705 GATE OPENED SUCCESSFULLY by barcode scan!
2025-07-02 03:15:18,989 - gui_exit_gate - INFO - Auto-capturing exit images for barcode: 1751400910513108
2025-07-02 03:15:18,989 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-02 03:15:19,056 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-02 03:15:19,056 - gui_exit_gate - INFO - \u2705 Auto-capture successful for barcode: 1751400910513108
2025-07-02 03:15:19,057 - gui_exit_gate - INFO - Stored combined exit image data
2025-07-02 03:15:19,057 - database_service - INFO - Searching for transaction with barcode: 1751400910513108
2025-07-02 03:15:19,092 - database_service - INFO - Performing full database scan (doc_count: 59)
2025-07-02 03:15:19,266 - database_service - INFO - No transaction found for barcode: 1751400910513108
2025-07-02 03:15:19,266 - gui_exit_gate - INFO - Cannot save images - transaction not found for barcode: 1751400910513108
2025-07-02 03:15:19,283 - gui_exit_gate - INFO - Camera preview updated (640x358)
2025-07-02 03:15:20,000 - gui_exit_gate - INFO - Gate status: CLOSING
2025-07-02 03:15:20,001 - gate_service - INFO - SIMULATION: Gate closed
2025-07-02 03:15:20,001 - gui_exit_gate - INFO - Gate status: CLOSED
2025-07-02 03:15:20,001 - gate_service - INFO - Gate closed successfully
2025-07-02 03:15:20,002 - gui_exit_gate - INFO - Auto-close gate: Success
2025-07-02 04:19:34,553 - gui_exit_gate - INFO - GUI Setup completed
2025-07-02 04:19:34,557 - gui_exit_gate - INFO - Initializing services...
2025-07-02 04:19:34,606 - config - INFO - Loaded configuration from config.ini
2025-07-02 04:19:34,607 - gate_service - WARNING - Hardware not available - running in SIMULATION mode
2025-07-02 04:19:34,614 - gui_exit_gate - INFO - Gate service imported successfully
2025-07-02 04:19:34,637 - gui_exit_gate - INFO - WARNING: USB scanner import failed: No module named 'termios'
2025-07-02 04:19:37,440 - database_service - INFO - Connected to CouchDB server: Unknown (legacy method)
2025-07-02 04:19:37,443 - database_service - INFO - Connected to existing database: transactions
2025-07-02 04:19:37,447 - database_service - INFO - Database connection established
2025-07-02 04:19:37,450 - gui_exit_gate - INFO - Database service imported successfully
2025-07-02 04:19:37,452 - root - WARNING - pygame not available, audio functionality disabled
2025-07-02 04:19:37,454 - gui_exit_gate - INFO - Audio service imported successfully
2025-07-02 04:19:37,459 - gui_exit_gate - INFO - Audio service is disabled or not available
2025-07-02 04:19:37,531 - camera_service - INFO - Driver camera disabled in configuration
2025-07-02 04:19:37,532 - camera_service - INFO - Initialized 1 cameras
2025-07-02 04:19:37,535 - gui_exit_gate - INFO - Camera service imported successfully
2025-07-02 04:19:37,540 - gui_exit_gate - INFO - Testing camera connectivity...
2025-07-02 04:19:37,540 - camera_service - INFO - Testing camera: exit
2025-07-02 04:19:37,540 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-02 04:19:37,620 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-02 04:19:37,620 - camera_service - INFO - Camera 'exit' test successful
2025-07-02 04:19:37,622 - gui_exit_gate - INFO - Camera 'exit': OK
2025-07-02 04:19:37,624 - gui_exit_gate - INFO - Scanner not available - manual input only
2025-07-02 04:19:37,627 - gui_exit_gate - INFO - Adding gate status listener...
2025-07-02 04:19:37,632 - gui_exit_gate - INFO - Gate status listener added
2025-07-02 04:19:37,634 - gui_exit_gate - INFO - Services initialization completed
2025-07-02 04:19:37,638 - gui_exit_gate - INFO - System ready - waiting for barcode input...
2025-07-02 04:19:37,643 - gui_exit_gate - INFO - Exit Gate GUI initialized
2025-07-02 04:19:37,644 - gui_exit_gate - INFO - Exit Gate GUI started
2025-07-02 04:19:37,786 - gui_exit_gate - INFO - Auto-listener started
2025-07-02 04:19:53,747 - gui_exit_gate - INFO - Shutting down...
2025-07-02 04:19:53,749 - gate_service - INFO - Gate service cleanup completed
2025-07-02 04:19:53,750 - audio_service - INFO - Audio service cleanup completed
2025-07-02 04:19:53,751 - gui_exit_gate - INFO - Camera service shutdown
2025-07-02 04:20:41,172 - __main__ - INFO - GUI Setup completed
2025-07-02 04:20:41,178 - __main__ - INFO - Initializing services...
2025-07-02 04:20:41,253 - config - INFO - Loaded configuration from config.ini
2025-07-02 04:20:41,257 - gate_service - WARNING - Hardware not available - running in SIMULATION mode
2025-07-02 04:20:41,266 - __main__ - INFO - Gate service imported successfully
2025-07-02 04:20:41,312 - __main__ - INFO - WARNING: USB scanner import failed: No module named 'termios'
2025-07-02 04:20:44,224 - database_service - INFO - Connected to CouchDB server: Unknown (legacy method)
2025-07-02 04:20:44,228 - database_service - INFO - Connected to existing database: transactions
2025-07-02 04:20:44,232 - database_service - INFO - Database connection established
2025-07-02 04:20:44,237 - __main__ - INFO - Database service imported successfully
2025-07-02 04:20:44,238 - root - WARNING - pygame not available, audio functionality disabled
2025-07-02 04:20:44,244 - __main__ - INFO - Audio service imported successfully
2025-07-02 04:20:44,249 - __main__ - INFO - Audio service is disabled or not available
2025-07-02 04:20:44,296 - camera_service - INFO - Driver camera disabled in configuration
2025-07-02 04:20:44,297 - camera_service - INFO - Initialized 1 cameras
2025-07-02 04:20:44,302 - __main__ - INFO - Camera service imported successfully
2025-07-02 04:20:44,305 - __main__ - INFO - Testing camera connectivity...
2025-07-02 04:20:44,306 - camera_service - INFO - Testing camera: exit
2025-07-02 04:20:44,306 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-02 04:20:44,368 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-02 04:20:44,369 - camera_service - INFO - Camera 'exit' test successful
2025-07-02 04:20:44,372 - __main__ - INFO - Camera 'exit': OK
2025-07-02 04:20:44,379 - __main__ - INFO - Scanner not available - manual input only
2025-07-02 04:20:44,383 - __main__ - INFO - Adding gate status listener...
2025-07-02 04:20:44,386 - __main__ - INFO - Gate status listener added
2025-07-02 04:20:44,390 - __main__ - INFO - Services initialization completed
2025-07-02 04:20:44,395 - __main__ - INFO - System ready - waiting for barcode input...
2025-07-02 04:20:44,399 - __main__ - INFO - Exit Gate GUI initialized
2025-07-02 04:20:44,403 - __main__ - INFO - Exit Gate GUI started
2025-07-02 04:20:44,575 - __main__ - INFO - Auto-listener started
2025-07-02 04:20:48,645 - __main__ - INFO - Capturing image from exit camera...
2025-07-02 04:20:48,646 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-02 04:20:48,689 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-02 04:20:49,081 - __main__ - INFO - \u2705 EXIT camera capture successful
2025-07-02 04:20:49,156 - __main__ - INFO - Camera preview updated (640x358)
2025-07-02 04:20:51,847 - __main__ - INFO - Shutting down...
2025-07-02 04:20:51,847 - gate_service - INFO - Gate service cleanup completed
2025-07-02 04:20:51,847 - audio_service - INFO - Audio service cleanup completed
2025-07-02 04:20:51,847 - __main__ - INFO - Camera service shutdown
2025-07-02 09:09:25,155 - __main__ - INFO - GUI Setup completed
2025-07-02 09:09:25,158 - __main__ - INFO - Initializing services...
2025-07-02 09:09:25,232 - config - INFO - Loaded configuration from config.ini
2025-07-02 09:09:25,232 - gate_service - INFO - Not running on Raspberry Pi - GPIO disabled
2025-07-02 09:09:25,234 - gate_service - INFO - \U0001f6aa Initializing Gate Service...
2025-07-02 09:09:25,235 - gate_service - WARNING - \u26a0\ufe0f Hardware not available - running in SIMULATION mode
2025-07-02 09:09:25,235 - gate_service - INFO - Gate Service initialized successfully in SIMULATION mode
2025-07-02 09:09:25,235 - gate_service - INFO - Global gate service instance created successfully
2025-07-02 09:09:25,237 - __main__ - INFO - Gate service imported successfully (fallback)
2025-07-02 09:09:25,249 - __main__ - INFO - WARNING: USB scanner import failed: No module named 'app'
2025-07-02 09:09:25,251 - __main__ - INFO - Fallback also failed: No module named 'termios'
2025-07-02 09:09:27,808 - database_service - INFO - Connected to CouchDB server: Unknown (legacy method)
2025-07-02 09:09:27,812 - database_service - INFO - Connected to existing database: transactions
2025-07-02 09:09:27,817 - database_service - INFO - Database connection established
2025-07-02 09:09:27,819 - __main__ - INFO - Database service imported successfully (fallback)
2025-07-02 09:09:27,821 - root - WARNING - pygame not available, audio functionality disabled
2025-07-02 09:09:27,823 - __main__ - INFO - Audio service imported successfully (fallback)
2025-07-02 09:09:27,826 - __main__ - INFO - Audio service is disabled or not available
2025-07-02 09:09:27,901 - camera_service - INFO - PIL/Pillow loaded successfully
2025-07-02 09:09:27,902 - camera_service - INFO - No Raspberry Pi camera libraries available
2025-07-02 09:09:27,903 - camera_service - INFO - OpenCV not available
2025-07-02 09:09:27,903 - camera_service - INFO - Driver camera disabled in configuration
2025-07-02 09:09:27,903 - camera_service - INFO - Initialized 1 cameras
2025-07-02 09:09:27,907 - __main__ - INFO - Camera service imported successfully (fallback)
2025-07-02 09:09:27,909 - __main__ - INFO - Testing camera connectivity...
2025-07-02 09:09:27,909 - camera_service - INFO - Testing camera: exit
2025-07-02 09:09:27,909 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-02 09:09:27,981 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-02 09:09:27,981 - camera_service - INFO - Camera 'exit' test successful
2025-07-02 09:09:27,982 - __main__ - INFO - Camera 'exit': OK
2025-07-02 09:09:27,984 - __main__ - INFO - Scanner not available - manual input only
2025-07-02 09:09:27,986 - __main__ - INFO - Adding gate status listener...
2025-07-02 09:09:27,987 - __main__ - INFO - Gate status listener added
2025-07-02 09:09:27,989 - __main__ - INFO - Gate Service Diagnostics:
2025-07-02 09:09:27,993 - __main__ - INFO -   Control Mode: SIMULATION
2025-07-02 09:09:27,996 - __main__ - INFO -   GPIO Available: No
2025-07-02 09:09:27,998 - __main__ - INFO -   GPIO Error: Not running on Raspberry Pi
2025-07-02 09:09:27,999 - __main__ - INFO - Testing gate service functionality...
2025-07-02 09:09:27,999 - gate_service - INFO - \U0001f9ea Testing hardware functionality...
2025-07-02 09:09:28,000 - gate_service - INFO - \u2705 Simulation mode test passed
2025-07-02 09:09:28,001 - __main__ - INFO - Gate hardware test: PASSED
2025-07-02 09:09:28,004 - __main__ - INFO - Services initialization completed
2025-07-02 09:09:28,005 - __main__ - INFO - System ready - waiting for barcode input...
2025-07-02 09:09:28,009 - __main__ - INFO - Exit Gate GUI initialized
2025-07-02 09:09:28,010 - __main__ - INFO - Exit Gate GUI started
2025-07-02 09:09:28,186 - __main__ - INFO - Auto-listener started
2025-07-02 09:09:34,725 - gate_service - INFO - \U0001f513 Opening gate...
2025-07-02 09:09:34,725 - __main__ - INFO - Gate status: OPENING
2025-07-02 09:09:34,726 - gate_service - INFO - \U0001f3ad SIMULATION: Gate opened
2025-07-02 09:09:35,234 - __main__ - INFO - Gate status: OPEN
2025-07-02 09:09:35,234 - gate_service - INFO - \u2705 Gate opened successfully
2025-07-02 09:09:35,234 - __main__ - INFO - Manual gate open: Success
2025-07-02 09:09:37,745 - __main__ - INFO - Capturing image from exit camera...
2025-07-02 09:09:37,745 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-02 09:09:37,978 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-02 09:09:38,213 - __main__ - INFO - \u2705 EXIT camera capture successful
2025-07-02 09:09:38,320 - __main__ - INFO - Camera preview updated (640x358)
2025-07-02 09:09:41,790 - __main__ - INFO - Fullscreen mode: OFF
2025-07-05 10:52:38,230 - __main__ - INFO - GUI Setup completed
2025-07-05 10:52:38,248 - __main__ - INFO - Initializing services...
2025-07-05 10:52:38,530 - config - INFO - Loaded configuration from config.ini
2025-07-05 10:52:38,536 - gate_service - INFO - Not running on Raspberry Pi - GPIO disabled
2025-07-05 10:52:38,544 - gate_service - INFO - \U0001f6aa Initializing Gate Service...
2025-07-05 10:52:38,546 - gate_service - WARNING - \u26a0\ufe0f Hardware not available - running in SIMULATION mode
2025-07-05 10:52:38,546 - gate_service - INFO - Gate Service initialized successfully in SIMULATION mode
2025-07-05 10:52:38,546 - gate_service - INFO - Global gate service instance created successfully
2025-07-05 10:52:38,559 - __main__ - INFO - Gate service imported successfully (fallback)
2025-07-05 10:52:38,725 - __main__ - INFO - WARNING: USB scanner import failed: No module named 'app'
2025-07-05 10:52:38,740 - __main__ - INFO - Fallback also failed: No module named 'termios'
2025-07-05 10:52:44,663 - database_service - INFO - Connected to CouchDB server: Unknown (legacy method)
2025-07-05 10:52:44,780 - database_service - INFO - Connected to existing database: transactions
2025-07-05 10:52:44,974 - database_service - INFO - Database connection established
2025-07-05 10:52:44,983 - __main__ - INFO - Database service imported successfully (fallback)
2025-07-05 10:52:44,999 - root - WARNING - pygame not available, audio functionality disabled
2025-07-05 10:52:45,008 - __main__ - INFO - Audio service imported successfully (fallback)
2025-07-05 10:52:45,026 - __main__ - INFO - Audio service is disabled or not available
2025-07-05 10:52:45,392 - camera_service - INFO - PIL/Pillow loaded successfully
2025-07-05 10:52:45,396 - camera_service - INFO - No Raspberry Pi camera libraries available
2025-07-05 10:52:45,398 - camera_service - INFO - OpenCV not available
2025-07-05 10:52:45,400 - camera_service - INFO - Driver camera disabled in configuration
2025-07-05 10:52:45,400 - camera_service - INFO - Initialized 1 cameras
2025-07-05 10:52:45,448 - __main__ - INFO - Camera service imported successfully (fallback)
2025-07-05 10:52:45,679 - __main__ - INFO - Testing camera connectivity...
2025-07-05 10:52:45,710 - camera_service - INFO - Testing camera: exit
2025-07-05 10:52:45,711 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-05 10:52:46,043 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-05 10:52:46,044 - camera_service - INFO - Camera 'exit' test successful
2025-07-05 10:52:46,049 - __main__ - INFO - Camera 'exit': OK
2025-07-05 10:52:46,079 - __main__ - INFO - Scanner not available - manual input only
2025-07-05 10:52:46,101 - __main__ - INFO - Adding gate status listener...
2025-07-05 10:52:46,133 - __main__ - INFO - Gate status listener added
2025-07-05 10:52:46,508 - __main__ - INFO - Gate Service Diagnostics:
2025-07-05 10:52:46,702 - __main__ - INFO -   Control Mode: SIMULATION
2025-07-05 10:52:46,819 - __main__ - INFO -   GPIO Available: No
2025-07-05 10:52:46,933 - __main__ - INFO -   GPIO Error: Not running on Raspberry Pi
2025-07-05 10:52:47,163 - __main__ - INFO - Testing gate service functionality...
2025-07-05 10:52:47,225 - gate_service - INFO - \U0001f9ea Testing hardware functionality...
2025-07-05 10:52:47,226 - gate_service - INFO - \u2705 Simulation mode test passed
2025-07-05 10:52:47,333 - __main__ - INFO - Gate hardware test: PASSED
2025-07-05 10:52:47,501 - __main__ - INFO - Services initialization completed
2025-07-05 10:52:47,593 - __main__ - INFO - System ready - waiting for barcode input...
2025-07-05 10:52:47,819 - __main__ - INFO - Exit Gate GUI initialized
2025-07-05 10:52:47,825 - __main__ - INFO - Exit Gate GUI started
2025-07-05 10:52:48,416 - __main__ - INFO - Auto-listener started
2025-07-05 10:53:11,631 - __main__ - INFO - Auto-processing barcode: 1751616597645462
2025-07-05 10:53:11,634 - __main__ - INFO - === BARCODE INPUT RECEIVED ===
2025-07-05 10:53:11,637 - __main__ - INFO - Raw barcode: '1751616597645462'
2025-07-05 10:53:11,642 - __main__ - INFO - Barcode length: 16
2025-07-05 10:53:11,646 - __main__ - INFO - Barcode valid - calling process_vehicle_exit
2025-07-05 10:53:11,652 - __main__ - INFO - === PROCESSING VEHICLE EXIT ===
2025-07-05 10:53:11,658 - __main__ - INFO - Barcode: 1751616597645462
2025-07-05 10:53:11,663 - __main__ - INFO - Debug mode: ENABLED
2025-07-05 10:53:11,667 - __main__ - INFO - Capturing exit images...
2025-07-05 10:53:11,668 - database_service - INFO - Processing vehicle exit for: 1751616597645462
2025-07-05 10:53:11,702 - database_service - INFO - Searching for transaction with barcode: 1751616597645462
2025-07-05 10:53:11,727 - database_service - INFO - Found transaction by primary ID: transaction_1751616597645462
2025-07-05 10:53:11,727 - database_service - INFO - Found transaction by barcode
2025-07-05 10:53:11,727 - database_service - ERROR - Error calculating parking fee: can't subtract offset-naive and offset-aware datetimes
2025-07-05 10:53:11,728 - database_service - INFO - Calculated fee: 0 for 0 hours
2025-07-05 10:53:11,879 - database_service - INFO - Transaction transaction_1751616597645462 marked as exited
2025-07-05 10:53:11,879 - database_service - INFO - Vehicle exit processed successfully for: 1751616597645462
2025-07-05 10:53:12,901 - __main__ - INFO - \u2705 Valid transaction found in database
2025-07-05 10:53:12,910 - __main__ - INFO - Opening gate - Valid transaction
2025-07-05 10:53:12,922 - __main__ - INFO - Gate service available - triggering open
2025-07-05 10:53:12,929 - gate_service - INFO - \U0001f513 Opening gate...
2025-07-05 10:53:12,932 - __main__ - INFO - Gate status: OPENING
2025-07-05 10:53:12,934 - gate_service - INFO - \U0001f3ad SIMULATION: Gate opened
2025-07-05 10:53:13,442 - __main__ - INFO - Gate status: OPEN
2025-07-05 10:53:13,451 - gate_service - INFO - \u2705 Gate opened successfully
2025-07-05 10:53:13,455 - __main__ - INFO - \u2705 GATE OPENED SUCCESSFULLY by barcode scan!
2025-07-05 10:53:13,467 - __main__ - INFO - Auto-capturing exit images for barcode: 1751616597645462
2025-07-05 10:53:13,475 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-05 10:53:13,855 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-05 10:53:13,858 - __main__ - INFO - \u2705 Auto-capture successful for barcode: 1751616597645462
2025-07-05 10:53:13,862 - __main__ - INFO - Stored combined exit image data
2025-07-05 10:53:13,864 - database_service - INFO - Searching for transaction with barcode: 1751616597645462
2025-07-05 10:53:13,893 - database_service - INFO - Found transaction by primary ID: transaction_1751616597645462
2025-07-05 10:53:13,896 - __main__ - INFO - Saving exit images to transaction: transaction_1751616597645462
2025-07-05 10:53:14,309 - database_service - INFO - Added image exit.jpg to transaction transaction_1751616597645462
2025-07-05 10:53:14,311 - __main__ - INFO - \u2705 Saved exit image as attachment (combined)
2025-07-05 10:53:14,316 - __main__ - INFO - Successfully saved 1 exit image(s) as attachment(s)
2025-07-05 10:53:14,669 - __main__ - INFO - Camera preview updated (640x358)
2025-07-05 10:53:14,672 - gate_service - INFO - \U0001f512 Closing gate...
2025-07-05 10:53:14,674 - __main__ - INFO - Gate status: CLOSING
2025-07-05 10:53:14,676 - gate_service - INFO - \U0001f3ad SIMULATION: Gate closed
2025-07-05 10:53:15,191 - __main__ - INFO - Gate status: CLOSED
2025-07-05 10:53:15,192 - gate_service - INFO - \u2705 Gate closed successfully
2025-07-05 10:53:15,194 - __main__ - INFO - Auto-close gate: Success
2025-07-05 10:57:39,013 - __main__ - INFO - Auto-processing barcode: 1751687832910106
2025-07-05 10:57:39,015 - __main__ - INFO - === BARCODE INPUT RECEIVED ===
2025-07-05 10:57:39,018 - __main__ - INFO - Raw barcode: '1751687832910106'
2025-07-05 10:57:39,019 - __main__ - INFO - Barcode length: 16
2025-07-05 10:57:39,021 - __main__ - INFO - Barcode valid - calling process_vehicle_exit
2025-07-05 10:57:39,024 - __main__ - INFO - === PROCESSING VEHICLE EXIT ===
2025-07-05 10:57:39,027 - __main__ - INFO - Barcode: 1751687832910106
2025-07-05 10:57:39,029 - __main__ - INFO - Debug mode: ENABLED
2025-07-05 10:57:39,031 - __main__ - INFO - Capturing exit images...
2025-07-05 10:57:39,033 - database_service - INFO - Processing vehicle exit for: 1751687832910106
2025-07-05 10:57:39,052 - database_service - INFO - Searching for transaction with barcode: 1751687832910106
2025-07-05 10:57:39,107 - database_service - INFO - Found transaction by primary ID: transaction_1751687832910106
2025-07-05 10:57:39,107 - database_service - INFO - Found transaction by barcode
2025-07-05 10:57:39,107 - database_service - ERROR - Error calculating parking fee: can't subtract offset-naive and offset-aware datetimes
2025-07-05 10:57:39,108 - database_service - INFO - Calculated fee: 0 for 0 hours
2025-07-05 10:57:39,168 - database_service - INFO - Transaction transaction_1751687832910106 marked as exited
2025-07-05 10:57:39,250 - database_service - INFO - Added image exit.jpg to transaction transaction_1751687832910106
2025-07-05 10:57:39,250 - database_service - INFO - Added exit image to transaction
2025-07-05 10:57:39,250 - database_service - INFO - Vehicle exit processed successfully for: 1751687832910106
2025-07-05 10:57:39,251 - __main__ - INFO - \u2705 Valid transaction found in database
2025-07-05 10:57:39,254 - __main__ - INFO - Opening gate - Valid transaction
2025-07-05 10:57:39,257 - __main__ - INFO - Gate service available - triggering open
2025-07-05 10:57:39,258 - gate_service - INFO - \U0001f513 Opening gate...
2025-07-05 10:57:39,259 - __main__ - INFO - Gate status: OPENING
2025-07-05 10:57:39,261 - gate_service - INFO - \U0001f3ad SIMULATION: Gate opened
2025-07-05 10:57:39,776 - __main__ - INFO - Gate status: OPEN
2025-07-05 10:57:39,777 - gate_service - INFO - \u2705 Gate opened successfully
2025-07-05 10:57:39,778 - __main__ - INFO - \u2705 GATE OPENED SUCCESSFULLY by barcode scan!
2025-07-05 10:57:39,780 - __main__ - INFO - Auto-capturing exit images for barcode: 1751687832910106
2025-07-05 10:57:39,782 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-05 10:57:39,950 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-05 10:57:39,953 - __main__ - INFO - \u2705 Auto-capture successful for barcode: 1751687832910106
2025-07-05 10:57:39,955 - __main__ - INFO - Stored combined exit image data
2025-07-05 10:57:39,956 - database_service - INFO - Searching for transaction with barcode: 1751687832910106
2025-07-05 10:57:39,988 - database_service - INFO - Found transaction by primary ID: transaction_1751687832910106
2025-07-05 10:57:39,989 - __main__ - INFO - Saving exit images to transaction: transaction_1751687832910106
2025-07-05 10:57:40,094 - database_service - INFO - Added image exit.jpg to transaction transaction_1751687832910106
2025-07-05 10:57:40,095 - __main__ - INFO - \u2705 Saved exit image as attachment (combined)
2025-07-05 10:57:40,096 - __main__ - INFO - Successfully saved 1 exit image(s) as attachment(s)
2025-07-05 10:57:40,125 - __main__ - INFO - Camera preview updated (640x358)
2025-07-05 10:57:40,786 - gate_service - INFO - \U0001f512 Closing gate...
2025-07-05 10:57:40,787 - __main__ - INFO - Gate status: CLOSING
2025-07-05 10:57:40,788 - gate_service - INFO - \U0001f3ad SIMULATION: Gate closed
2025-07-05 10:57:41,303 - __main__ - INFO - Gate status: CLOSED
2025-07-05 10:57:41,305 - gate_service - INFO - \u2705 Gate closed successfully
2025-07-05 10:57:41,306 - __main__ - INFO - Auto-close gate: Success
2025-07-05 10:58:47,629 - __main__ - INFO - Auto-processing barcode: 1751687904760823
2025-07-05 10:58:47,630 - __main__ - INFO - === BARCODE INPUT RECEIVED ===
2025-07-05 10:58:47,631 - __main__ - INFO - Raw barcode: '1751687904760823'
2025-07-05 10:58:47,632 - __main__ - INFO - Barcode length: 16
2025-07-05 10:58:47,634 - __main__ - INFO - Barcode valid - calling process_vehicle_exit
2025-07-05 10:58:47,635 - __main__ - INFO - === PROCESSING VEHICLE EXIT ===
2025-07-05 10:58:47,636 - __main__ - INFO - Barcode: 1751687904760823
2025-07-05 10:58:47,638 - __main__ - INFO - Debug mode: ENABLED
2025-07-05 10:58:47,640 - __main__ - INFO - Capturing exit images...
2025-07-05 10:58:47,642 - database_service - INFO - Processing vehicle exit for: 1751687904760823
2025-07-05 10:58:47,649 - database_service - INFO - Searching for transaction with barcode: 1751687904760823
2025-07-05 10:58:47,665 - database_service - INFO - Found transaction by primary ID: transaction_1751687904760823
2025-07-05 10:58:47,666 - database_service - INFO - Found transaction by barcode
2025-07-05 10:58:47,666 - database_service - ERROR - Error calculating parking fee: can't subtract offset-naive and offset-aware datetimes
2025-07-05 10:58:47,666 - database_service - INFO - Calculated fee: 0 for 0 hours
2025-07-05 10:58:47,697 - database_service - INFO - Transaction transaction_1751687904760823 marked as exited
2025-07-05 10:58:47,785 - database_service - INFO - Added image exit.jpg to transaction transaction_1751687904760823
2025-07-05 10:58:47,786 - database_service - INFO - Added exit image to transaction
2025-07-05 10:58:47,786 - database_service - INFO - Vehicle exit processed successfully for: 1751687904760823
2025-07-05 10:58:47,788 - __main__ - INFO - \u2705 Valid transaction found in database
2025-07-05 10:58:47,794 - __main__ - INFO - Opening gate - Valid transaction
2025-07-05 10:58:47,797 - __main__ - INFO - Gate service available - triggering open
2025-07-05 10:58:47,799 - gate_service - INFO - \U0001f513 Opening gate...
2025-07-05 10:58:47,800 - __main__ - INFO - Gate status: OPENING
2025-07-05 10:58:47,802 - gate_service - INFO - \U0001f3ad SIMULATION: Gate opened
2025-07-05 10:58:48,314 - __main__ - INFO - Gate status: OPEN
2025-07-05 10:58:48,318 - gate_service - INFO - \u2705 Gate opened successfully
2025-07-05 10:58:48,319 - __main__ - INFO - \u2705 GATE OPENED SUCCESSFULLY by barcode scan!
2025-07-05 10:58:48,322 - __main__ - INFO - Auto-capturing exit images for barcode: 1751687904760823
2025-07-05 10:58:48,324 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-05 10:58:48,401 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-05 10:58:48,403 - __main__ - INFO - \u2705 Auto-capture successful for barcode: 1751687904760823
2025-07-05 10:58:48,405 - __main__ - INFO - Stored combined exit image data
2025-07-05 10:58:48,406 - database_service - INFO - Searching for transaction with barcode: 1751687904760823
2025-07-05 10:58:48,420 - database_service - INFO - Found transaction by primary ID: transaction_1751687904760823
2025-07-05 10:58:48,422 - __main__ - INFO - Saving exit images to transaction: transaction_1751687904760823
2025-07-05 10:58:48,457 - database_service - INFO - Added image exit.jpg to transaction transaction_1751687904760823
2025-07-05 10:58:48,460 - __main__ - INFO - \u2705 Saved exit image as attachment (combined)
2025-07-05 10:58:48,463 - __main__ - INFO - Successfully saved 1 exit image(s) as attachment(s)
2025-07-05 10:58:48,518 - __main__ - INFO - Camera preview updated (640x358)
2025-07-05 10:58:49,325 - gate_service - INFO - \U0001f512 Closing gate...
2025-07-05 10:58:49,327 - __main__ - INFO - Gate status: CLOSING
2025-07-05 10:58:49,329 - gate_service - INFO - \U0001f3ad SIMULATION: Gate closed
2025-07-05 10:58:49,841 - __main__ - INFO - Gate status: CLOSED
2025-07-05 10:58:49,842 - gate_service - INFO - \u2705 Gate closed successfully
2025-07-05 10:58:49,844 - __main__ - INFO - Auto-close gate: Success
2025-07-05 11:02:09,915 - __main__ - INFO - Auto-processing barcode: 1751688119437880
2025-07-05 11:02:09,917 - __main__ - INFO - === BARCODE INPUT RECEIVED ===
2025-07-05 11:02:09,918 - __main__ - INFO - Raw barcode: '1751688119437880'
2025-07-05 11:02:09,918 - __main__ - INFO - Barcode length: 16
2025-07-05 11:02:09,920 - __main__ - INFO - Barcode valid - calling process_vehicle_exit
2025-07-05 11:02:09,921 - __main__ - INFO - === PROCESSING VEHICLE EXIT ===
2025-07-05 11:02:09,922 - __main__ - INFO - Barcode: 1751688119437880
2025-07-05 11:02:09,923 - __main__ - INFO - Debug mode: ENABLED
2025-07-05 11:02:09,924 - __main__ - INFO - Capturing exit images...
2025-07-05 11:02:09,925 - database_service - INFO - Processing vehicle exit for: 1751688119437880
2025-07-05 11:02:09,931 - database_service - INFO - Searching for transaction with barcode: 1751688119437880
2025-07-05 11:02:09,975 - database_service - WARNING - Barcode view search failed: ('not_found', 'deleted')
2025-07-05 11:02:09,987 - database_service - WARNING - Active transaction manual search failed: ('not_found', 'deleted')
2025-07-05 11:02:09,998 - database_service - INFO - Performing full database scan (doc_count: 13)
2025-07-05 11:02:10,043 - database_service - INFO - Found transaction by full scan: transaction_transaction_1751688119437880 (extracted barcode: 1751688119437880, status: 0)
2025-07-05 11:02:10,043 - database_service - INFO - Found transaction by barcode
2025-07-05 11:02:10,044 - database_service - ERROR - Error calculating parking fee: can't subtract offset-naive and offset-aware datetimes
2025-07-05 11:02:10,044 - database_service - INFO - Calculated fee: 0 for 0 hours
2025-07-05 11:02:10,068 - database_service - INFO - Transaction transaction_transaction_1751688119437880 marked as exited
2025-07-05 11:02:10,142 - database_service - INFO - Added image exit.jpg to transaction transaction_transaction_1751688119437880
2025-07-05 11:02:10,143 - database_service - INFO - Added exit image to transaction
2025-07-05 11:02:10,143 - database_service - INFO - Vehicle exit processed successfully for: 1751688119437880
2025-07-05 11:02:10,145 - __main__ - INFO - \u2705 Valid transaction found in database
2025-07-05 11:02:10,147 - __main__ - INFO - Opening gate - Valid transaction
2025-07-05 11:02:10,151 - __main__ - INFO - Gate service available - triggering open
2025-07-05 11:02:10,152 - gate_service - INFO - \U0001f513 Opening gate...
2025-07-05 11:02:10,155 - __main__ - INFO - Gate status: OPENING
2025-07-05 11:02:10,156 - gate_service - INFO - \U0001f3ad SIMULATION: Gate opened
2025-07-05 11:02:10,665 - __main__ - INFO - Gate status: OPEN
2025-07-05 11:02:10,667 - gate_service - INFO - \u2705 Gate opened successfully
2025-07-05 11:02:10,669 - __main__ - INFO - \u2705 GATE OPENED SUCCESSFULLY by barcode scan!
2025-07-05 11:02:10,671 - __main__ - INFO - Auto-capturing exit images for barcode: 1751688119437880
2025-07-05 11:02:10,672 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-05 11:02:10,861 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-05 11:02:10,863 - __main__ - INFO - \u2705 Auto-capture successful for barcode: 1751688119437880
2025-07-05 11:02:10,865 - __main__ - INFO - Stored combined exit image data
2025-07-05 11:02:10,866 - database_service - INFO - Searching for transaction with barcode: 1751688119437880
2025-07-05 11:02:10,902 - database_service - WARNING - Barcode view search failed: ('not_found', 'deleted')
2025-07-05 11:02:10,913 - database_service - WARNING - Active transaction manual search failed: ('not_found', 'deleted')
2025-07-05 11:02:10,922 - database_service - INFO - Performing full database scan (doc_count: 13)
2025-07-05 11:02:10,959 - database_service - INFO - Found transaction by full scan: transaction_transaction_1751688119437880 (extracted barcode: 1751688119437880, status: 1)
2025-07-05 11:02:10,962 - __main__ - INFO - Saving exit images to transaction: transaction_transaction_1751688119437880
2025-07-05 11:02:11,000 - database_service - INFO - Added image exit.jpg to transaction transaction_transaction_1751688119437880
2025-07-05 11:02:11,003 - __main__ - INFO - \u2705 Saved exit image as attachment (combined)
2025-07-05 11:02:11,006 - __main__ - INFO - Successfully saved 1 exit image(s) as attachment(s)
2025-07-05 11:02:11,070 - __main__ - INFO - Camera preview updated (640x358)
2025-07-05 11:02:11,681 - gate_service - INFO - \U0001f512 Closing gate...
2025-07-05 11:02:11,683 - __main__ - INFO - Gate status: CLOSING
2025-07-05 11:02:11,683 - gate_service - INFO - \U0001f3ad SIMULATION: Gate closed
2025-07-05 11:02:12,199 - __main__ - INFO - Gate status: CLOSED
2025-07-05 11:02:12,200 - gate_service - INFO - \u2705 Gate closed successfully
2025-07-05 11:02:12,200 - __main__ - INFO - Auto-close gate: Success
2025-07-05 11:20:11,954 - __main__ - INFO - Auto-processing barcode: 1751689187945775
2025-07-05 11:20:11,958 - __main__ - INFO - === BARCODE INPUT RECEIVED ===
2025-07-05 11:20:11,960 - __main__ - INFO - Raw barcode: '1751689187945775'
2025-07-05 11:20:11,964 - __main__ - INFO - Barcode length: 16
2025-07-05 11:20:11,969 - __main__ - INFO - Barcode valid - calling process_vehicle_exit
2025-07-05 11:20:11,971 - __main__ - INFO - === PROCESSING VEHICLE EXIT ===
2025-07-05 11:20:11,979 - __main__ - INFO - Barcode: 1751689187945775
2025-07-05 11:20:11,981 - __main__ - INFO - Debug mode: ENABLED
2025-07-05 11:20:11,986 - __main__ - INFO - Capturing exit images...
2025-07-05 11:20:11,990 - database_service - INFO - Processing vehicle exit for: 1751689187945775
2025-07-05 11:20:14,026 - database_service - INFO - Searching for transaction with barcode: 1751689187945775
2025-07-05 11:20:14,047 - database_service - INFO - Found transaction by primary ID: transaction_1751689187945775
2025-07-05 11:20:14,047 - database_service - INFO - Found transaction by barcode
2025-07-05 11:20:14,047 - database_service - ERROR - Error calculating parking fee: can't subtract offset-naive and offset-aware datetimes
2025-07-05 11:20:14,047 - database_service - INFO - Calculated fee: 0 for 0 hours
2025-07-05 11:20:14,091 - database_service - INFO - Transaction transaction_1751689187945775 marked as exited
2025-07-05 11:20:14,140 - database_service - INFO - Added image exit.jpg to transaction transaction_1751689187945775
2025-07-05 11:20:14,140 - database_service - INFO - Added exit image to transaction
2025-07-05 11:20:14,141 - database_service - INFO - Vehicle exit processed successfully for: 1751689187945775
2025-07-05 11:20:14,144 - __main__ - INFO - \u2705 Valid transaction found in database
2025-07-05 11:20:14,146 - __main__ - INFO - Opening gate - Valid transaction
2025-07-05 11:20:14,148 - __main__ - INFO - Gate service available - triggering open
2025-07-05 11:20:14,150 - gate_service - INFO - \U0001f513 Opening gate...
2025-07-05 11:20:14,152 - __main__ - INFO - Gate status: OPENING
2025-07-05 11:20:14,154 - gate_service - INFO - \U0001f3ad SIMULATION: Gate opened
2025-07-05 11:20:14,670 - __main__ - INFO - Gate status: OPEN
2025-07-05 11:20:14,672 - gate_service - INFO - \u2705 Gate opened successfully
2025-07-05 11:20:14,674 - __main__ - INFO - \u2705 GATE OPENED SUCCESSFULLY by barcode scan!
2025-07-05 11:20:14,677 - __main__ - INFO - Auto-capturing exit images for barcode: 1751689187945775
2025-07-05 11:20:14,679 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-05 11:20:14,762 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-05 11:20:14,764 - __main__ - INFO - \u2705 Auto-capture successful for barcode: 1751689187945775
2025-07-05 11:20:14,765 - __main__ - INFO - Stored combined exit image data
2025-07-05 11:20:14,766 - database_service - INFO - Searching for transaction with barcode: 1751689187945775
2025-07-05 11:20:14,786 - database_service - INFO - Found transaction by primary ID: transaction_1751689187945775
2025-07-05 11:20:14,788 - __main__ - INFO - Saving exit images to transaction: transaction_1751689187945775
2025-07-05 11:20:14,849 - database_service - INFO - Added image exit.jpg to transaction transaction_1751689187945775
2025-07-05 11:20:14,851 - __main__ - INFO - \u2705 Saved exit image as attachment (combined)
2025-07-05 11:20:14,856 - __main__ - INFO - Successfully saved 1 exit image(s) as attachment(s)
2025-07-05 11:20:14,905 - __main__ - INFO - Camera preview updated (640x358)
2025-07-05 11:20:15,680 - gate_service - INFO - \U0001f512 Closing gate...
2025-07-05 11:20:15,682 - __main__ - INFO - Gate status: CLOSING
2025-07-05 11:20:15,683 - gate_service - INFO - \U0001f3ad SIMULATION: Gate closed
2025-07-05 11:20:16,195 - __main__ - INFO - Gate status: CLOSED
2025-07-05 11:20:16,197 - gate_service - INFO - \u2705 Gate closed successfully
2025-07-05 11:20:16,199 - __main__ - INFO - Auto-close gate: Success
2025-07-05 11:21:40,206 - __main__ - INFO - Auto-processing barcode: 1751689285703695
2025-07-05 11:21:40,208 - __main__ - INFO - === BARCODE INPUT RECEIVED ===
2025-07-05 11:21:40,209 - __main__ - INFO - Raw barcode: '1751689285703695'
2025-07-05 11:21:40,209 - __main__ - INFO - Barcode length: 16
2025-07-05 11:21:40,210 - __main__ - INFO - Barcode valid - calling process_vehicle_exit
2025-07-05 11:21:40,211 - __main__ - INFO - === PROCESSING VEHICLE EXIT ===
2025-07-05 11:21:40,212 - __main__ - INFO - Barcode: 1751689285703695
2025-07-05 11:21:40,212 - __main__ - INFO - Debug mode: ENABLED
2025-07-05 11:21:40,213 - __main__ - INFO - Capturing exit images...
2025-07-05 11:21:40,213 - database_service - INFO - Processing vehicle exit for: 1751689285703695
2025-07-05 11:21:40,219 - database_service - INFO - Searching for transaction with barcode: 1751689285703695
2025-07-05 11:21:40,233 - database_service - INFO - Found transaction by primary ID: transaction_1751689285703695
2025-07-05 11:21:40,234 - database_service - INFO - Found transaction by barcode
2025-07-05 11:21:40,234 - database_service - ERROR - Error calculating parking fee: can't subtract offset-naive and offset-aware datetimes
2025-07-05 11:21:40,234 - database_service - INFO - Calculated fee: 0 for 0 hours
2025-07-05 11:21:40,262 - database_service - INFO - Transaction transaction_1751689285703695 marked as exited
2025-07-05 11:21:40,354 - database_service - INFO - Added image exit.jpg to transaction transaction_1751689285703695
2025-07-05 11:21:40,354 - database_service - INFO - Added exit image to transaction
2025-07-05 11:21:40,355 - database_service - INFO - Vehicle exit processed successfully for: 1751689285703695
2025-07-05 11:21:40,356 - __main__ - INFO - \u2705 Valid transaction found in database
2025-07-05 11:21:40,357 - __main__ - INFO - Opening gate - Valid transaction
2025-07-05 11:21:40,358 - __main__ - INFO - Gate service available - triggering open
2025-07-05 11:21:40,359 - gate_service - INFO - \U0001f513 Opening gate...
2025-07-05 11:21:40,360 - __main__ - INFO - Gate status: OPENING
2025-07-05 11:21:40,360 - gate_service - INFO - \U0001f3ad SIMULATION: Gate opened
2025-07-05 11:21:40,874 - __main__ - INFO - Gate status: OPEN
2025-07-05 11:21:40,875 - gate_service - INFO - \u2705 Gate opened successfully
2025-07-05 11:21:40,876 - __main__ - INFO - \u2705 GATE OPENED SUCCESSFULLY by barcode scan!
2025-07-05 11:21:40,877 - __main__ - INFO - Auto-capturing exit images for barcode: 1751689285703695
2025-07-05 11:21:40,878 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-05 11:21:40,956 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-05 11:21:40,957 - __main__ - INFO - \u2705 Auto-capture successful for barcode: 1751689285703695
2025-07-05 11:21:40,959 - __main__ - INFO - Stored combined exit image data
2025-07-05 11:21:40,959 - database_service - INFO - Searching for transaction with barcode: 1751689285703695
2025-07-05 11:21:40,972 - database_service - INFO - Found transaction by primary ID: transaction_1751689285703695
2025-07-05 11:21:40,974 - __main__ - INFO - Saving exit images to transaction: transaction_1751689285703695
2025-07-05 11:21:41,003 - database_service - INFO - Added image exit.jpg to transaction transaction_1751689285703695
2025-07-05 11:21:41,005 - __main__ - INFO - \u2705 Saved exit image as attachment (combined)
2025-07-05 11:21:41,007 - __main__ - INFO - Successfully saved 1 exit image(s) as attachment(s)
2025-07-05 11:21:41,061 - __main__ - INFO - Camera preview updated (640x358)
2025-07-05 11:21:41,887 - gate_service - INFO - \U0001f512 Closing gate...
2025-07-05 11:21:41,889 - __main__ - INFO - Gate status: CLOSING
2025-07-05 11:21:41,890 - gate_service - INFO - \U0001f3ad SIMULATION: Gate closed
2025-07-05 11:21:42,403 - __main__ - INFO - Gate status: CLOSED
2025-07-05 11:21:42,404 - gate_service - INFO - \u2705 Gate closed successfully
2025-07-05 11:21:42,405 - __main__ - INFO - Auto-close gate: Success
2025-07-05 12:28:23,199 - __main__ - INFO - Shutting down...
2025-07-05 12:28:23,208 - gate_service - INFO - \U0001f9f9 Cleaning up gate service...
2025-07-05 12:28:23,210 - gate_service - INFO - \u2705 Gate service cleanup completed successfully
2025-07-05 12:28:23,212 - audio_service - INFO - Audio service cleanup completed
2025-07-05 12:28:23,214 - __main__ - INFO - Camera service shutdown
2025-07-05 12:28:23,505 - gate_service - INFO - \U0001f9f9 Cleaning up gate service...
2025-07-05 12:28:23,507 - gate_service - INFO - \u2705 Gate service cleanup completed successfully
2025-07-05 12:28:27,686 - __main__ - INFO - GUI Setup completed
2025-07-05 12:28:27,690 - __main__ - INFO - Initializing services...
2025-07-05 12:28:27,771 - config - INFO - Loaded configuration from config.ini
2025-07-05 12:28:27,771 - gate_service - INFO - Not running on Raspberry Pi - GPIO disabled
2025-07-05 12:28:27,775 - gate_service - INFO - \U0001f6aa Initializing Gate Service...
2025-07-05 12:28:27,775 - gate_service - WARNING - \u26a0\ufe0f Hardware not available - running in SIMULATION mode
2025-07-05 12:28:27,775 - gate_service - INFO - Gate Service initialized successfully in SIMULATION mode
2025-07-05 12:28:27,776 - gate_service - INFO - Global gate service instance created successfully
2025-07-05 12:28:27,785 - __main__ - INFO - Gate service imported successfully (fallback)
2025-07-05 12:28:27,808 - __main__ - INFO - WARNING: USB scanner import failed: No module named 'app'
2025-07-05 12:28:27,818 - __main__ - INFO - Fallback also failed: No module named 'termios'
2025-07-05 12:28:31,041 - database_service - INFO - Connected to CouchDB server: Unknown (legacy method)
2025-07-05 12:28:31,050 - database_service - INFO - Connected to existing database: transactions
2025-07-05 12:28:31,205 - database_service - INFO - Created database views
2025-07-05 12:28:31,206 - database_service - INFO - Database connection established
2025-07-05 12:28:31,210 - __main__ - INFO - Database service imported successfully (fallback)
2025-07-05 12:28:31,216 - root - WARNING - pygame not available, audio functionality disabled
2025-07-05 12:28:31,221 - __main__ - INFO - Audio service imported successfully (fallback)
2025-07-05 12:28:31,228 - __main__ - INFO - Audio service is disabled or not available
2025-07-05 12:28:31,360 - camera_service - INFO - PIL/Pillow loaded successfully
2025-07-05 12:28:31,362 - camera_service - INFO - No Raspberry Pi camera libraries available
2025-07-05 12:28:31,364 - camera_service - INFO - OpenCV not available
2025-07-05 12:28:31,364 - camera_service - INFO - Driver camera disabled in configuration
2025-07-05 12:28:31,365 - camera_service - INFO - Initialized 1 cameras
2025-07-05 12:28:31,371 - __main__ - INFO - Camera service imported successfully (fallback)
2025-07-05 12:28:31,380 - __main__ - INFO - Testing camera connectivity...
2025-07-05 12:28:31,384 - camera_service - INFO - Testing camera: exit
2025-07-05 12:28:31,384 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-05 12:28:31,479 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-05 12:28:31,480 - camera_service - INFO - Camera 'exit' test successful
2025-07-05 12:28:31,483 - __main__ - INFO - Camera 'exit': OK
2025-07-05 12:28:31,499 - __main__ - INFO - Scanner not available - manual input only
2025-07-05 12:28:31,509 - __main__ - INFO - Adding gate status listener...
2025-07-05 12:28:31,515 - __main__ - INFO - Gate status listener added
2025-07-05 12:28:31,520 - __main__ - INFO - Gate Service Diagnostics:
2025-07-05 12:28:31,532 - __main__ - INFO -   Control Mode: SIMULATION
2025-07-05 12:28:31,539 - __main__ - INFO -   GPIO Available: No
2025-07-05 12:28:31,566 - __main__ - INFO -   GPIO Error: Not running on Raspberry Pi
2025-07-05 12:28:31,587 - __main__ - INFO - Testing gate service functionality...
2025-07-05 12:28:31,588 - gate_service - INFO - \U0001f9ea Testing hardware functionality...
2025-07-05 12:28:31,588 - gate_service - INFO - \u2705 Simulation mode test passed
2025-07-05 12:28:31,592 - __main__ - INFO - Gate hardware test: PASSED
2025-07-05 12:28:31,609 - __main__ - INFO - Services initialization completed
2025-07-05 12:28:31,620 - __main__ - INFO - System ready - waiting for barcode input...
2025-07-05 12:28:31,656 - __main__ - INFO - Exit Gate GUI initialized
2025-07-05 12:28:31,659 - __main__ - INFO - Exit Gate GUI started
2025-07-05 12:28:31,909 - __main__ - INFO - Auto-listener started
2025-07-05 12:28:49,799 - __main__ - INFO - Auto-processing barcode: 1751690433718835
2025-07-05 12:28:49,800 - __main__ - INFO - === BARCODE INPUT RECEIVED ===
2025-07-05 12:28:49,800 - __main__ - INFO - Raw barcode: '1751690433718835'
2025-07-05 12:28:49,801 - __main__ - INFO - Barcode length: 16
2025-07-05 12:28:49,801 - __main__ - INFO - Barcode valid - calling process_vehicle_exit
2025-07-05 12:28:49,802 - __main__ - INFO - === PROCESSING VEHICLE EXIT ===
2025-07-05 12:28:49,802 - __main__ - INFO - Barcode: 1751690433718835
2025-07-05 12:28:49,802 - __main__ - INFO - Debug mode: ENABLED
2025-07-05 12:28:49,803 - __main__ - INFO - Capturing exit images...
2025-07-05 12:28:49,804 - database_service - INFO - Processing vehicle exit for: 1751690433718835
2025-07-05 12:28:49,807 - database_service - INFO - Searching for transaction with barcode: 1751690433718835
2025-07-05 12:28:49,819 - database_service - INFO - Found transaction by primary ID: transaction_1751690433718835
2025-07-05 12:28:49,819 - database_service - INFO - Found transaction by barcode
2025-07-05 12:28:49,819 - database_service - ERROR - Error calculating parking fee: can't subtract offset-naive and offset-aware datetimes
2025-07-05 12:28:49,819 - database_service - INFO - Calculated fee: 0 for 0 hours
2025-07-05 12:28:49,852 - database_service - INFO - Transaction transaction_1751690433718835 marked as exited
2025-07-05 12:28:49,852 - database_service - INFO - Vehicle exit processed successfully for: 1751690433718835
2025-07-05 12:28:50,264 - __main__ - INFO - \u2705 Valid transaction found in database
2025-07-05 12:28:50,264 - __main__ - INFO - Opening gate - Valid transaction
2025-07-05 12:28:50,265 - __main__ - INFO - Gate service available - triggering open
2025-07-05 12:28:50,265 - gate_service - INFO - \U0001f513 Opening gate...
2025-07-05 12:28:50,266 - __main__ - INFO - Gate status: OPENING
2025-07-05 12:28:50,266 - gate_service - INFO - \U0001f3ad SIMULATION: Gate opened
2025-07-05 12:28:50,767 - __main__ - INFO - Gate status: OPEN
2025-07-05 12:28:50,767 - gate_service - INFO - \u2705 Gate opened successfully
2025-07-05 12:28:50,768 - __main__ - INFO - \u2705 GATE OPENED SUCCESSFULLY by barcode scan!
2025-07-05 12:28:50,768 - __main__ - INFO - Auto-capturing exit images for barcode: 1751690433718835
2025-07-05 12:28:50,769 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-05 12:28:50,840 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-05 12:28:50,841 - __main__ - INFO - \u2705 Auto-capture successful for barcode: 1751690433718835
2025-07-05 12:28:50,841 - __main__ - INFO - Stored combined exit image data
2025-07-05 12:28:50,842 - database_service - INFO - Searching for transaction with barcode: 1751690433718835
2025-07-05 12:28:50,891 - database_service - INFO - Found transaction by primary ID: transaction_1751690433718835
2025-07-05 12:28:50,892 - __main__ - INFO - Saving exit images to transaction: transaction_1751690433718835
2025-07-05 12:28:50,988 - database_service - INFO - Added image exit.jpg to transaction transaction_1751690433718835
2025-07-05 12:28:50,988 - __main__ - INFO - \u2705 Saved exit image as attachment (combined)
2025-07-05 12:28:50,989 - __main__ - INFO - Successfully saved 1 exit image(s) as attachment(s)
2025-07-05 12:28:51,110 - __main__ - INFO - Camera preview updated (320x179)
2025-07-05 12:28:51,769 - gate_service - INFO - \U0001f512 Closing gate...
2025-07-05 12:28:51,771 - __main__ - INFO - Gate status: CLOSING
2025-07-05 12:28:51,771 - gate_service - INFO - \U0001f3ad SIMULATION: Gate closed
2025-07-05 12:28:52,274 - __main__ - INFO - Gate status: CLOSED
2025-07-05 12:28:52,274 - gate_service - INFO - \u2705 Gate closed successfully
2025-07-05 12:28:52,276 - __main__ - INFO - Auto-close gate: Success
2025-07-05 12:34:51,545 - __main__ - INFO - Auto-processing barcode: 1751693586912494
2025-07-05 12:34:51,547 - __main__ - INFO - === BARCODE INPUT RECEIVED ===
2025-07-05 12:34:51,549 - __main__ - INFO - Raw barcode: '1751693586912494'
2025-07-05 12:34:51,550 - __main__ - INFO - Barcode length: 16
2025-07-05 12:34:51,551 - __main__ - INFO - Barcode valid - calling process_vehicle_exit
2025-07-05 12:34:51,553 - __main__ - INFO - === PROCESSING VEHICLE EXIT ===
2025-07-05 12:34:51,554 - __main__ - INFO - Barcode: 1751693586912494
2025-07-05 12:34:51,555 - __main__ - INFO - Debug mode: ENABLED
2025-07-05 12:34:51,557 - __main__ - INFO - Capturing exit images...
2025-07-05 12:34:51,557 - database_service - INFO - Processing vehicle exit for: 1751693586912494
2025-07-05 12:34:53,587 - database_service - INFO - Searching for transaction with barcode: 1751693586912494
2025-07-05 12:34:53,602 - database_service - INFO - Found transaction by primary ID: transaction_1751693586912494
2025-07-05 12:34:53,603 - database_service - INFO - Found transaction by barcode
2025-07-05 12:34:53,603 - database_service - ERROR - Error calculating parking fee: can't subtract offset-naive and offset-aware datetimes
2025-07-05 12:34:53,603 - database_service - INFO - Calculated fee: 0 for 0 hours
2025-07-05 12:34:53,624 - database_service - INFO - Transaction transaction_1751693586912494 marked as exited
2025-07-05 12:34:53,684 - database_service - INFO - Added image exit.jpg to transaction transaction_1751693586912494
2025-07-05 12:34:53,685 - database_service - INFO - Added exit image to transaction
2025-07-05 12:34:53,685 - database_service - INFO - Vehicle exit processed successfully for: 1751693586912494
2025-07-05 12:34:53,687 - __main__ - INFO - \u2705 Valid transaction found in database
2025-07-05 12:34:53,690 - __main__ - INFO - Opening gate - Valid transaction
2025-07-05 12:34:53,692 - __main__ - INFO - Gate service available - triggering open
2025-07-05 12:34:53,693 - gate_service - INFO - \U0001f513 Opening gate...
2025-07-05 12:34:53,696 - __main__ - INFO - Gate status: OPENING
2025-07-05 12:34:53,696 - gate_service - INFO - \U0001f3ad SIMULATION: Gate opened
2025-07-05 12:34:54,208 - __main__ - INFO - Gate status: OPEN
2025-07-05 12:34:54,210 - gate_service - INFO - \u2705 Gate opened successfully
2025-07-05 12:34:54,212 - __main__ - INFO - \u2705 GATE OPENED SUCCESSFULLY by barcode scan!
2025-07-05 12:34:54,214 - __main__ - INFO - Auto-capturing exit images for barcode: 1751693586912494
2025-07-05 12:34:54,215 - camera_service - INFO - Attempting capture from: http://admin:***@192.168.10.70/Snapshot/1/RemoteImageCapture?ImageFormat=2
2025-07-05 12:34:54,257 - camera_service - INFO - Successfully captured image from camera 'exit'
2025-07-05 12:34:54,260 - __main__ - INFO - \u2705 Auto-capture successful for barcode: 1751693586912494
2025-07-05 12:34:54,263 - __main__ - INFO - Stored combined exit image data
2025-07-05 12:34:54,264 - database_service - INFO - Searching for transaction with barcode: 1751693586912494
2025-07-05 12:34:54,278 - database_service - INFO - Found transaction by primary ID: transaction_1751693586912494
2025-07-05 12:34:54,281 - __main__ - INFO - Saving exit images to transaction: transaction_1751693586912494
2025-07-05 12:34:54,312 - database_service - INFO - Added image exit.jpg to transaction transaction_1751693586912494
2025-07-05 12:34:54,331 - __main__ - INFO - \u2705 Saved exit image as attachment (combined)
2025-07-05 12:34:54,342 - __main__ - INFO - Successfully saved 1 exit image(s) as attachment(s)
2025-07-05 12:34:54,385 - __main__ - INFO - Camera preview updated (320x179)
2025-07-05 12:34:55,221 - gate_service - INFO - \U0001f512 Closing gate...
2025-07-05 12:34:55,224 - __main__ - INFO - Gate status: CLOSING
2025-07-05 12:34:55,225 - gate_service - INFO - \U0001f3ad SIMULATION: Gate closed
2025-07-05 12:34:55,740 - __main__ - INFO - Gate status: CLOSED
2025-07-05 12:34:55,741 - gate_service - INFO - \u2705 Gate closed successfully
2025-07-05 12:34:55,743 - __main__ - INFO - Auto-close gate: Success
2025-07-05 12:35:50,011 - gate_service - INFO - \U0001f9f9 Cleaning up gate service...
2025-07-05 12:35:50,011 - gate_service - INFO - \u2705 Gate service cleanup completed successfully
